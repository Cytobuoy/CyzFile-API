<html>
  <head>
    <title>Release Notes CyzFile.DLL</title>
    <style TYPE="text/css">
        <!--
        table.main {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }


        table.main {
            border: 1px solid #FFD20A;
        }

            table.main > tbody > tr > td {
                border: 1px solid #FFD20A;
            }

            table.main > tbody > tr > th {
                border: 1px solid #FFD20A;
            }

        td {
            vertical-align: top;
        }

        td, th {
            font-size: 1.2em;
            padding: 3px 7px 2px 7px;
        }

        table.main > tbody > tr > th {
            font-size: 1.4em;
            text-align: left;
            padding-top: 5px;
            padding-bottom: 4px;
            background-color: #FFD20A;
            color: #fff;
        }

        table.main > tbody > tr:nth-child(odd) {
            color: #000;
            background-color: #FFE27A;
        }

        /* Do not breakup the date column. */
        table.main > tbody > tr > td:nth-child(2) {
            white-space: nowrap;
        }

        table.item {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 100%;
            border: 1px solid #000000;
        }

            table.item th {
                text-align: left;
                vertical-align: top;
                border: 1px solid #000000;
                font-size: 1.0em;
            }

                table.item th:nth-child(1) {
                    width: 100px;
                }

            table.item td {
                border: 1px solid #000000;
                font-size: 1.0em;
            }
        -->
    </style>
  </head>
  <body>
      <table class="main">
          <tr>
              <th>Version</th>
              <th>Date</th>
              <th>Description</th>
          </tr>
          <tr>
              <td>1.4.0.0</td>
              <td>2024-08-21</td>
              <td>
                <h4>Changes</h4>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Migrated from .NET Framework 4.7.2 to .Net 8.0</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        .NET 8 is the latest Long Term Support (LTS) version, so we should be able to stay on this one for a while.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Exposed the GetChannelLineType function</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        Exposed the GetChannelLineType function from CytoSenseSettings to enable the Background window to display properly in CytoClus.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Change all uses of the Gate class to IGate</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        Bring it in line with the rest of the code and prevent casting.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Added the autocrop settings to the saved cytosettings</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        Added the settings that were used for autocropping in CytoUSB (including if it was enabled) to the IIFSettings object.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Updated various nuget packages</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        Updated the log4net package and various other packages.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Added ListID and visible property to the Copy constructor of GateBasedSet</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        These properties are neccesary for certain functionality to work, but were sometimes lost when cloning or copying these sets.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Add Crop Failures as property to measurementInfo</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        This property gives insight in the amount of pictures that were discarded during autocrop because no particle could be found in the image.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Make CytoImage throw the complete exception</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        Exceptions that occur in CytoImage are most likely OpenCV error. The inner exception of these is lost most of the times, giving no insight in what actually went wrong.
                        We now always throw the entire exception as string to make sure we keep the inner exception.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Implemented</td></tr>
                  </table>
                </p>
                <h4>Bug Fixes</h4>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Fix schedules not properly deserializing in .NET 7.0</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        Saved schedules would not be able to be fully added in again due to a deserialization error.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Fixed</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Fix serialNumber being empty in workspace XML</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        The serialNumber property was added to better link workspaces to machines, but it was sometimes not added to the xml.
                        This caused issues with workspace loading.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Fixed</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Fix trigger channel array issue in old files</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        There was a problem with the stored trigger channel array on some old
                        (2011) datafiles.  This corrects the length of the array after
                        loading the datafile.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Fixed</td></tr>
                  </table>
                </p>
                <p>
                  <table class="item">
                    <tr><th>Subject:</th><th>Fix CytoMemoryStream buffer being inaccesable</th></tr>
                    <tr>
                      <th>Summary:</th>
                      <td>
                        Depending on the constructor that was being used the MemoryStream variable that allows the memoryStream to be retrieved to be reused would not be set.
                        The TryGetBuffer function would always fail. Changed it so we now always set is so the buffer is accesible.
                      </td>
                    </tr>
                    <tr><th>Status:</th><td>Fixed</td></tr>
                  </table>
                </p>

              </td>
          </tr>
          <tr>
              <td>1.1.4.1</td>
              <td>2024-09-23</td>
              <td>
                  <h4>Bug Fixes</h4>
                  <ul>
                      <li>
                          Fixed new laser information attributes for old instruments. For some older instruments accessing the properties would
                          crash because the code did not correctly check for there presence.
                      </li>
                      <li>
                          Fixed a problem loading some old (From 2011) data files.  These files were saved incorrectly, and this caused problems
                          when trying to access the TriggerChannel property.  Now we fix the problem in the datafile after loading it.
                      </li>
                  </ul>
              </td>
          </tr>
          <tr>
              <td>1.1.4.0</td>
              <td>2024-09-12</td>
              <td>
                  <h4>Changes</h4>
                  <ul>
                      <li>
                          Add support for storing sensor data directly read from the laser.  This feature was added for newer
                          CytoSense XR instruments. The sensor data includes diode temperatures, cooling system load, diode hours used, etc.
                      </li>
                      <li>Add support for two new External Sampling Chamber options: enable/disable the pinchvalve and a minimum sample chamber refresh time</li>
                  </ul>
                  <h4>Bug Fixes</h4>
                  <ul>
                      <li>Fixed empty setlist serial number when saving a setlist in CytoClus.</li>
                  </ul>
              </td>
          </tr>
          <tr>
              <td>1.1.3.0</td>
              <td>2024-04-12</td>
              <td>
                  <h4>Changes</h4>
                  <ul>
                      <li>
                          Small changes to setlist and XML serialization to allow CytoClus to use XML serialization
                          for its workspaces.
                      </li>
                      <li>A few small project file changes to make nuget package restore happier.</li>
                  </ul>
              </td>
          </tr>
          <tr>
              <td>1.1.2.0</td>
              <td>2024-03-08</td>
              <td>
                  <h4>Changes</h4>
                  <ul>
                      <li>
                          Added a new constructor to the CytoMemoryStream that allows making a slightly more efficient implementation of imagedisplay
                          in CytoUsb.
                      </li>
                      <li>Added support for storing some options for the new External Beads Sheath and Toxin system. (Version 2)</li>
                      <li>Added support for old instruments (2017 and before) and live cropping during acquisition.</li>
                      <li>
                          Add support for a different location of the basic CytoSense folders (only interesting inside CytoUsb and CytoClus, not
                          when using the CyzFile dll directly.)
                      </li>
                      <li>Fixed release notes, the date on the previous entry was incorrect..</li>
                  </ul>
              </td>
          </tr>
          <tr>
              <td>1.1.1.0</td>
              <td>2024-02-21</td>
              <td>
                  <h4>Changes</h4>
                  <ul>
                      <li>Added support for data files where the images have been live cropped during acquisition.  This is possible since CytoUsb version 6.2</li>
                      <li>Added support for measurements with just a background measurement and no real measurement data at all.</li>
                      <li>Added support for serializing some structures to XML files. This is used for settings files in newer versions of CytoClus.</li>
                  </ul>
              </td>
          </tr>
          <tr>
              <td>1.1.0.0</td>
              <td>2023-11-30</td>
              <td>
                  <h4>First Release</h4>

                  This is the first release version of the CyzFile DLL.  This version is the also used in the next
                  official releases of CytoUsb and CytoClus.
              </td>
          </tr>
      </table>
  </body>
</html>